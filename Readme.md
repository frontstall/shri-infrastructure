# ШРИ 2020 Инфраструктура

Перед запуском проекта необходимо установить зависимости:

`make install`

После чего собрать:

`make build`

И запустить сервер и агент:

`make start-server`
`make start-agent`

Проект можно запустить без сборки, используя версию для разработки:

`cd server && npm start`
`cd agent && npm start`

Для доступа к хранилищу необходимо определить переменную окружения TOKEN с токеном доступа, либо записать токен в поле `apiToken` конфигурационного файла сервера `./server/server-conf.json`.

При старте сервера из хранилища скачаваются настройки репозитория. В качестве имени репозитория должен быть указан абсолютный путь до локальной папки с репозиторием. Агент клонирует репозиторий во временную папку, переключается на указанный коммит, устанавливает зависимости, выполняет команду сборки и прогоняет тесты.
